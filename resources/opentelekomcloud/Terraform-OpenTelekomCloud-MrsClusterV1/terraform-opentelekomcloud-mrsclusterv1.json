{
    "typeName": "Terraform::OpenTelekomCloud::MrsClusterV1",
    "description": "Manages resource cluster within OpenTelekomCloud MRS.",
    "sourceUrl": "https://github.com/iann0036/cfn-tf-custom-types.git",
    "definitions": {
        "AddJobs": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "Arguments": {
                    "type": "string"
                },
                "FileAction": {
                    "type": "string"
                },
                "HiveScriptPath": {
                    "type": "string"
                },
                "Hql": {
                    "type": "string"
                },
                "Input": {
                    "type": "string"
                },
                "JarPath": {
                    "type": "string"
                },
                "JobLog": {
                    "type": "string"
                },
                "JobName": {
                    "type": "string"
                },
                "JobType": {
                    "type": "number"
                },
                "Output": {
                    "type": "string"
                },
                "ShutdownCluster": {
                    "type": "boolean"
                },
                "SubmitJobOnceClusterRun": {
                    "type": "boolean"
                }
            },
            "required": [
                "JarPath",
                "JobName",
                "JobType",
                "SubmitJobOnceClusterRun"
            ]
        },
        "BootstrapScripts": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "ActiveMaster": {
                    "type": "boolean"
                },
                "BeforeComponentStart": {
                    "type": "boolean"
                },
                "FailAction": {
                    "type": "string"
                },
                "Name": {
                    "type": "string"
                },
                "Nodes": {
                    "type": "array",
                    "insertionOrder": false,
                    "items": {
                        "type": "string"
                    }
                },
                "Parameters": {
                    "type": "string"
                },
                "Uri": {
                    "type": "string"
                }
            },
            "required": [
                "FailAction",
                "Name",
                "Nodes",
                "Uri"
            ]
        },
        "ComponentList": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "ComponentName": {
                    "type": "string",
                    "description": "Component name Currently, Hadoop, Spark, HBase,\nHive, Hue, Loader, Flume, Kafka and Storm are supported. Loader and Flume are\nnot supported by MRS 1.3.0. Kafka and Storm are not supported by MRS 1.2."
                }
            },
            "required": [
                "ComponentName"
            ]
        },
        "Timeouts": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "Create": {
                    "type": "string"
                },
                "Delete": {
                    "type": "string"
                }
            },
            "required": []
        }
    },
    "properties": {
        "tfcfnid": {
            "description": "Internal identifier for tracking resource changes. Do not use.",
            "type": "string"
        },
        "AvailableZoneId": {
            "type": "string",
            "description": "ID of an available zone. Obtain the value\nfrom Regions and Endpoints."
        },
        "AvailableZoneName": {
            "type": "string"
        },
        "BillingType": {
            "type": "number",
            "description": "The value is 12, indicating on-demand payment."
        },
        "ChargingStartTime": {
            "type": "string"
        },
        "ClusterAdminSecret": {
            "type": "string",
            "description": "Indicates the password of the MRS Manager\nadministrator. The password for MRS 1.5.0: Must contain 6 to 32 characters.\nMust contain at least two types of the following: Lowercase letters Uppercase\nletters Digits Special characters of `~!@#$%^&*()-_=+\\|[{}];:'\",<.>/? Spaces\nMust be different from the username. Must be different from the username written\nin reverse order. The password for MRS 1.3.0: Must contain 8 to 64 characters.\nMust contain at least four types of the following: Lowercase letters Uppercase\nletters Digits Special characters of `~!@#$%^&*()-_=+\\|[{}];:'\",<.>/? Spaces\nMust be different from the username. Must be different from the username written\nin reverse order. This parameter needs to be configured only when safe_mode\nis set to 1."
        },
        "ClusterId": {
            "type": "string"
        },
        "ClusterName": {
            "type": "string",
            "description": "Cluster name, which is globally unique and contains\nonly 1 to 64 letters, digits, hyphens (-), and underscores (_)."
        },
        "ClusterState": {
            "type": "string"
        },
        "ClusterType": {
            "type": "number",
            "description": "Type of clusters 0: analysis cluster 1: streaming\ncluster The default value is 0."
        },
        "ClusterVersion": {
            "type": "string",
            "description": "Version of the clusters Currently, MRS 1.2, MRS 1.3.0,\nMRS 1.5.0, MRS 1.6.0 and MRS 1.6.3 are supported. The latest version of MRS is used\nby default. Currently, the latest version is MRS 1.6.3."
        },
        "CoreDataVolumeCount": {
            "type": "number",
            "description": "Number of data disks of the Core node.\nValue range: 1 to 10. This parameter is a multi-disk parameter available\nfor MRS 1.6.0 or later versions."
        },
        "CoreDataVolumeSize": {
            "type": "number",
            "description": "Data disk size of the Core node.\nValue range: 100 GB to 32000 GB. This parameter is a multi-disk parameter available\nfor MRS 1.6.0 or later versions."
        },
        "CoreDataVolumeType": {
            "type": "string",
            "description": "Data disk storage type of the Core node,\nsupporting SATA, SAS and SSD. SATA: Common I/O, SAS: High I/O, SSD: Ultra-high I/O.\nThis parameter is a multi-disk parameter available for MRS 1.6.0 or later versions."
        },
        "CoreNodeNum": {
            "type": "number",
            "description": "Number of Core nodes Value range: 1 to 500 A\nmaximum of 500 Core nodes are supported by default. If more than 500 Core nodes\nare required, contact technical support engineers or invoke background APIs\nto modify the database."
        },
        "CoreNodeProductId": {
            "type": "string"
        },
        "CoreNodeSize": {
            "type": "string",
            "description": "Instance specification of a Core node Configuration\nmethod of this parameter is identical to that of master_node_size."
        },
        "CoreNodeSpecId": {
            "type": "string"
        },
        "CreateAt": {
            "type": "string"
        },
        "DeploymentId": {
            "type": "string"
        },
        "Duration": {
            "type": "string"
        },
        "ErrorInfo": {
            "type": "string"
        },
        "ExternalAlternateIp": {
            "type": "string"
        },
        "ExternalIp": {
            "type": "string"
        },
        "Fee": {
            "type": "string"
        },
        "HadoopVersion": {
            "type": "string"
        },
        "Id": {
            "type": "string"
        },
        "InstanceId": {
            "type": "string"
        },
        "InternalIp": {
            "type": "string"
        },
        "LogCollection": {
            "type": "number",
            "description": "Indicates whether logs are collected when cluster\ninstallation fails. 0: not collected 1: collected The default value is 0. If\nlog_collection is set to 1, OBS buckets will be created to collect the MRS logs.\nThese buckets will be charged."
        },
        "MasterDataVolumeCount": {
            "type": "number",
            "description": "Number of data disks of the Master node.\nThe value can be set to 1 only. This parameter is a multi-disk parameter available\nfor MRS 1.6.0 or later versions."
        },
        "MasterDataVolumeSize": {
            "type": "number",
            "description": "Data disk size of the Master node.\nValue range: 100 GB to 32000 GB. This parameter is a multi-disk parameter available\nfor MRS 1.6.0 or later versions."
        },
        "MasterDataVolumeType": {
            "type": "string",
            "description": "Data disk storage type of the Master node,\nsupporting SATA, SAS and SSD. SATA: Common I/O, SAS: High I/O, SSD: Ultra-high I/O.\nThis parameter is a multi-disk parameter available for MRS 1.6.0 or later versions."
        },
        "MasterNodeIp": {
            "type": "string"
        },
        "MasterNodeNum": {
            "type": "number",
            "description": "Number of Master nodes The value is 2."
        },
        "MasterNodeProductId": {
            "type": "string"
        },
        "MasterNodeSize": {
            "type": "string",
            "description": "Best match based on several years of commissioning\nexperience. MRS supports specifications of hosts, and host specifications are\ndetermined by CPUs, memory, and disks space. Master nodes support h1.2xlarge.linux.mrs\nh1.4xlarge.linux.mrs, h1.8xlarge.linux.mrs, s1.4xlarge.linux.mrs,\nand s1.8xlarge.linux.mrs. Core nodes of a streaming cluster support all specifications\nc2.2xlarge.linux.mrs, c2.4xlarge.linux.mrs, s1.xlarge.linux.mrs, s1.4xlarge.linux.mrs,\ns1.8xlarge.linux.mrs, d1.xlarge.linux.mrs, d1.2xlarge.linux.mrs, d1.4xlarge.linux.mrs,\nd1.8xlarge.linux.mrs, h1.2xlarge.linux.mrs, h1.4xlarge.linux.mrs and h1.8xlarge.linux.mrs.\nTask nodes support c2.2xlarge.linux.mrs, c2.4xlarge.linux.mrs, s1.xlarge.linux.mrs,\ns1.4xlarge.linux.mrs, s1.8xlarge.linux.mrs, h1.2xlarge.linux.mrs, h1.4xlarge.linux.mrs,\nand h1.8xlarge.linux.mrs."
        },
        "MasterNodeSpecId": {
            "type": "string"
        },
        "NodePublicCertName": {
            "type": "string",
            "description": "Name of a key pair You can use a key\nto log in to the Master node in the cluster."
        },
        "OrderId": {
            "type": "string"
        },
        "PrivateIpFirst": {
            "type": "string"
        },
        "Region": {
            "type": "string"
        },
        "Remark": {
            "type": "string"
        },
        "SafeMode": {
            "type": "number",
            "description": "MRS cluster running mode 0: common mode The value\nindicates that the Kerberos authentication is disabled. Users can use all functions\nprovided by the cluster. 1: safe mode The value indicates that the Kerberos\nauthentication is enabled. Common users cannot use the file management or job\nmanagement functions of an MRS cluster and cannot view cluster resource usage\nor the job records of Hadoop and Spark. To use these functions, the users must\nobtain the relevant permissions from the MRS Manager administrator. The request\nhas the cluster_admin_secret parameter only when safe_mode is set to 1."
        },
        "SecurityGroupsId": {
            "type": "string"
        },
        "SlaveSecurityGroupsId": {
            "type": "string"
        },
        "SubnetId": {
            "type": "string",
            "description": "Subnet ID Obtain the subnet ID from the management\nconsole as follows: Register an account and log in to the management console.\nClick Virtual Private Cloud and select Virtual Private Cloud from the left list.\nOn the Virtual Private Cloud page, obtain the subnet ID from the list."
        },
        "Tags": {
            "type": "array",
            "insertionOrder": true,
            "items": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "MapKey": {
                        "type": "string"
                    },
                    "MapValue": {
                        "type": "string"
                    }
                },
                "required": [
                    "MapKey",
                    "MapValue"
                ]
            },
            "description": "Tags key/value pairs to associate with the cluster."
        },
        "TenantId": {
            "type": "string"
        },
        "UpdateAt": {
            "type": "string"
        },
        "Vnc": {
            "type": "string"
        },
        "VolumeSize": {
            "type": "number",
            "description": "Data disk storage space of a Core node Users can\nadd disks to expand storage capacity when creating a cluster. There are the\nfollowing scenarios: Separation of data storage and computing: Data is stored\nin the OBS system. Costs of clusters are relatively low but computing performance\nis poor. The clusters can be deleted at any time. It is recommended when data\ncomputing is not frequently performed. Integration of data storage and computing:\nData is stored in the HDFS system. Costs of clusters are relatively high but\ncomputing performance is good. The clusters cannot be deleted in a short term.\nIt is recommended when data computing is frequently performed. Value range:\n100 GB to 32000 GB."
        },
        "VolumeType": {
            "type": "string",
            "description": "Type of disks SATA, SAS and SSD are supported. SATA:\ncommon I/O, SAS: High I/O, SSD: Ultra-high I/O."
        },
        "VpcId": {
            "type": "string",
            "description": "ID of the VPC where the subnet locates Obtain the VPC\nID from the management console as follows: Register an account and log in to\nthe management console. Click Virtual Private Cloud and select Virtual Private\nCloud from the left list. On the Virtual Private Cloud page, obtain the VPC\nID from the list."
        },
        "AddJobs": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "$ref": "#/definitions/AddJobs"
            }
        },
        "BootstrapScripts": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "$ref": "#/definitions/BootstrapScripts"
            }
        },
        "ComponentList": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "$ref": "#/definitions/ComponentList"
            },
            "minItems": 1
        },
        "Timeouts": {
            "$ref": "#/definitions/Timeouts"
        }
    },
    "additionalProperties": false,
    "required": [
        "AvailableZoneId",
        "BillingType",
        "ClusterName",
        "CoreNodeNum",
        "CoreNodeSize",
        "MasterNodeNum",
        "MasterNodeSize",
        "NodePublicCertName",
        "SafeMode",
        "SubnetId",
        "VpcId"
    ],
    "readOnlyProperties": [
        "/properties/tfcfnid",
        "/properties/AvailableZoneName",
        "/properties/ChargingStartTime",
        "/properties/ClusterId",
        "/properties/ClusterState",
        "/properties/CoreNodeProductId",
        "/properties/CoreNodeSpecId",
        "/properties/CreateAt",
        "/properties/DeploymentId",
        "/properties/Duration",
        "/properties/ErrorInfo",
        "/properties/ExternalAlternateIp",
        "/properties/ExternalIp",
        "/properties/Fee",
        "/properties/HadoopVersion",
        "/properties/Id",
        "/properties/InstanceId",
        "/properties/InternalIp",
        "/properties/MasterNodeIp",
        "/properties/MasterNodeProductId",
        "/properties/MasterNodeSpecId",
        "/properties/OrderId",
        "/properties/PrivateIpFirst",
        "/properties/Remark",
        "/properties/SecurityGroupsId",
        "/properties/SlaveSecurityGroupsId",
        "/properties/TenantId",
        "/properties/UpdateAt",
        "/properties/Vnc"
    ],
    "primaryIdentifier": [
        "/properties/tfcfnid"
    ],
    "handlers": {
        "create": {
            "permissions": [
                "s3:PutObject",
                "secretsmanager:GetSecretValue"
            ]
        },
        "read": {
            "permissions": []
        },
        "update": {
            "permissions": [
                "s3:GetObject",
                "s3:PutObject",
                "secretsmanager:GetSecretValue"
            ]
        },
        "delete": {
            "permissions": [
                "s3:GetObject",
                "s3:DeleteObject",
                "secretsmanager:GetSecretValue"
            ]
        },
        "list": {
            "permissions": []
        }
    }
}