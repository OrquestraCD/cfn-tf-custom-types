{
    "typeName": "Terraform::OCI::DatabaseDbSystem",
    "description": "This resource provides the Db System resource in Oracle Cloud Infrastructure Database service.\n\nCreates a new DB system in the specified compartment and availability domain. The Oracle\nDatabase edition that you specify applies to all the databases on that DB system. The selected edition cannot be changed.\n\nAn initial database is created on the DB system based on the request parameters you provide and some default\noptions. For detailed information about default options, see the following:\n\n- [Bare metal and virtual machine DB system default options](https://docs.cloud.oracle.com/iaas/Content/Database/Tasks/creatingDBsystem.htm#DefaultOptionsfortheInitialDatabase)\n- [Exadata DB system default options](https://docs.cloud.oracle.com/iaas/Content/Database/Tasks/exacreatingDBsystem.htm#DefaultOptionsfortheInitialDatabase)",
    "sourceUrl": "https://github.com/iann0036/cfn-tf-custom-types.git",
    "definitions": {
        "DbHome": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "DbVersion": {
                    "type": "string"
                },
                "DisplayName": {
                    "type": "string"
                },
                "Database": {
                    "type": "array",
                    "insertionOrder": true,
                    "items": {
                        "$ref": "#/definitions/Database"
                    },
                    "maxItems": 1,
                    "minItems": 1
                }
            },
            "required": []
        },
        "DbSystemOptions": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "StorageManagement": {
                    "type": "string"
                }
            },
            "required": []
        },
        "Timeouts": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "Create": {
                    "type": "string"
                },
                "Delete": {
                    "type": "string"
                },
                "Update": {
                    "type": "string"
                }
            },
            "required": []
        },
        "Database": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "AdminPassword": {
                    "type": "string"
                },
                "BackupId": {
                    "type": "string"
                },
                "BackupTdePassword": {
                    "type": "string"
                },
                "CharacterSet": {
                    "type": "string"
                },
                "DbName": {
                    "type": "string"
                },
                "DbWorkload": {
                    "type": "string"
                },
                "DefinedTags": {
                    "type": "array",
                    "insertionOrder": true,
                    "items": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "MapKey": {
                                "type": "string"
                            },
                            "MapValue": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "MapKey",
                            "MapValue"
                        ]
                    }
                },
                "FreeformTags": {
                    "type": "array",
                    "insertionOrder": true,
                    "items": {
                        "type": "object",
                        "additionalProperties": false,
                        "properties": {
                            "MapKey": {
                                "type": "string"
                            },
                            "MapValue": {
                                "type": "string"
                            }
                        },
                        "required": [
                            "MapKey",
                            "MapValue"
                        ]
                    }
                },
                "NcharacterSet": {
                    "type": "string"
                },
                "PdbName": {
                    "type": "string"
                },
                "DbBackupConfig": {
                    "type": "array",
                    "insertionOrder": true,
                    "items": {
                        "$ref": "#/definitions/DbBackupConfig"
                    },
                    "maxItems": 1
                }
            },
            "required": [
                "AdminPassword"
            ]
        },
        "DbBackupConfig": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "AutoBackupEnabled": {
                    "type": "boolean"
                },
                "AutoBackupWindow": {
                    "type": "string"
                },
                "RecoveryWindowInDays": {
                    "type": "number"
                },
                "BackupDestinationDetails": {
                    "type": "array",
                    "insertionOrder": true,
                    "items": {
                        "$ref": "#/definitions/BackupDestinationDetails"
                    }
                }
            },
            "required": []
        },
        "BackupDestinationDetails": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
                "Id": {
                    "type": "string"
                },
                "Type": {
                    "type": "string"
                }
            },
            "required": []
        }
    },
    "properties": {
        "tfcfnid": {
            "description": "Internal identifier for tracking resource changes. Do not use.",
            "type": "string"
        },
        "AvailabilityDomain": {
            "type": "string",
            "description": "The availability domain where the DB system is located."
        },
        "BackupNetworkNsgIds": {
            "type": "array",
            "insertionOrder": true,
            "items": {
                "type": "string"
            },
            "description": "(Updatable) A list of the [OCIDs](https://docs.cloud.oracle.com/iaas/Content/General/Concepts/identifiers.htm) of the network security groups (NSGs) that the backup network of this DB system belongs to. Setting this to an empty array after the list is created removes the resource from all NSGs. For more information about NSGs, see [Security Rules](https://docs.cloud.oracle.com/iaas/Content/Network/Concepts/securityrules.htm). Applicable only to Exadata DB systems."
        },
        "BackupSubnetId": {
            "type": "string",
            "description": "The [OCID](https://docs.cloud.oracle.com/iaas/Content/General/Concepts/identifiers.htm) of the backup network subnet the DB system is associated with. Applicable only to Exadata DB systems."
        },
        "ClusterName": {
            "type": "string",
            "description": "The cluster name for Exadata and 2-node RAC virtual machine DB systems. The cluster name must begin with an an alphabetic character, and may contain hyphens (-). Underscores (_) are not permitted. The cluster name can be no longer than 11 characters and is not case sensitive."
        },
        "CompartmentId": {
            "type": "string",
            "description": "(Updatable) The [OCID](https://docs.cloud.oracle.com/iaas/Content/General/Concepts/identifiers.htm) of the compartment the DB system  belongs in."
        },
        "CpuCoreCount": {
            "type": "number",
            "description": "(Updatable) The number of CPU cores to enable for a bare metal or Exadata DB system. The valid values depend on the specified shape:\n* BM.DenseIO1.36 - Specify a multiple of 2, from 2 to 36.\n* BM.DenseIO2.52 - Specify a multiple of 2, from 2 to 52.\n* Exadata.Base.48 - Specify a multiple of 2, from 0 to 48.\n* Exadata.Quarter1.84 - Specify a multiple of 2, from 22 to 84.\n* Exadata.Half1.168 - Specify a multiple of 4, from 44 to 168.\n* Exadata.Full1.336 - Specify a multiple of 8, from 88 to 336.\n* Exadata.Quarter2.92 - Specify a multiple of 2, from 0 to 92.\n* Exadata.Half2.184 - Specify a multiple of 4, from 0 to 184.\n* Exadata.Full2.368 - Specify a multiple of 8, from 0 to 368."
        },
        "DataStoragePercentage": {
            "type": "number",
            "description": "The percentage assigned to DATA storage (user data and database files). The remaining percentage is assigned to RECO storage (database redo logs, archive logs, and recovery manager backups). Specify 80 or 40. The default is 80 percent assigned to DATA storage. Not applicable for virtual machine DB systems."
        },
        "DataStorageSizeInGb": {
            "type": "number",
            "description": "(Updatable) Size (in GB) of the initial data volume that will be created and attached to a virtual machine DB system. You can scale up storage after provisioning, as needed. Note that the total storage size attached will be more than the amount you specify to allow for REDO/RECO space and software volume."
        },
        "DatabaseEdition": {
            "type": "string",
            "description": "The Oracle Database Edition that applies to all the databases on the DB system. Exadata DB systems and 2-node RAC DB systems require ENTERPRISE_EDITION_EXTREME_PERFORMANCE."
        },
        "DefinedTags": {
            "type": "array",
            "insertionOrder": true,
            "items": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "MapKey": {
                        "type": "string"
                    },
                    "MapValue": {
                        "type": "string"
                    }
                },
                "required": [
                    "MapKey",
                    "MapValue"
                ]
            }
        },
        "DiskRedundancy": {
            "type": "string"
        },
        "DisplayName": {
            "type": "string"
        },
        "Domain": {
            "type": "string"
        },
        "FaultDomains": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "type": "string"
            }
        },
        "FreeformTags": {
            "type": "array",
            "insertionOrder": true,
            "items": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "MapKey": {
                        "type": "string"
                    },
                    "MapValue": {
                        "type": "string"
                    }
                },
                "required": [
                    "MapKey",
                    "MapValue"
                ]
            }
        },
        "Hostname": {
            "type": "string"
        },
        "Id": {
            "type": "string"
        },
        "IormConfigCache": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                    "DbPlans": {
                        "type": "array",
                        "insertionOrder": false,
                        "items": {
                            "type": "object",
                            "additionalProperties": false,
                            "properties": {
                                "DbName": {
                                    "type": "string"
                                },
                                "FlashCacheLimit": {
                                    "type": "string"
                                },
                                "Share": {
                                    "type": "number"
                                }
                            }
                        }
                    },
                    "DbSystemId": {
                        "type": "string"
                    },
                    "LifecycleDetails": {
                        "type": "string"
                    },
                    "Objective": {
                        "type": "string"
                    },
                    "State": {
                        "type": "string"
                    }
                }
            }
        },
        "LastPatchHistoryEntryId": {
            "type": "string"
        },
        "LicenseModel": {
            "type": "string"
        },
        "LifecycleDetails": {
            "type": "string"
        },
        "ListenerPort": {
            "type": "number"
        },
        "NodeCount": {
            "type": "number"
        },
        "NsgIds": {
            "type": "array",
            "insertionOrder": true,
            "items": {
                "type": "string"
            }
        },
        "RecoStorageSizeInGb": {
            "type": "number"
        },
        "ScanDnsRecordId": {
            "type": "string"
        },
        "ScanIpIds": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "type": "string"
            }
        },
        "Shape": {
            "type": "string"
        },
        "Source": {
            "type": "string"
        },
        "SparseDiskgroup": {
            "type": "boolean"
        },
        "SshPublicKeys": {
            "type": "array",
            "insertionOrder": true,
            "items": {
                "type": "string"
            }
        },
        "State": {
            "type": "string"
        },
        "SubnetId": {
            "type": "string"
        },
        "TimeCreated": {
            "type": "string"
        },
        "TimeZone": {
            "type": "string"
        },
        "Version": {
            "type": "string"
        },
        "VipIds": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "type": "string"
            }
        },
        "DbHome": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "$ref": "#/definitions/DbHome"
            },
            "maxItems": 1,
            "minItems": 1
        },
        "DbSystemOptions": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "$ref": "#/definitions/DbSystemOptions"
            },
            "maxItems": 1
        },
        "Timeouts": {
            "$ref": "#/definitions/Timeouts"
        },
        "Database": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "$ref": "#/definitions/Database"
            },
            "maxItems": 1,
            "minItems": 1
        },
        "DbBackupConfig": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "$ref": "#/definitions/DbBackupConfig"
            },
            "maxItems": 1
        },
        "BackupDestinationDetails": {
            "type": "array",
            "insertionOrder": false,
            "items": {
                "$ref": "#/definitions/BackupDestinationDetails"
            }
        }
    },
    "additionalProperties": false,
    "required": [
        "AvailabilityDomain",
        "CompartmentId",
        "DatabaseEdition",
        "Hostname",
        "Shape",
        "SshPublicKeys",
        "SubnetId"
    ],
    "readOnlyProperties": [
        "/properties/tfcfnid",
        "/properties/Id",
        "/properties/IormConfigCache",
        "/properties/LastPatchHistoryEntryId",
        "/properties/LifecycleDetails",
        "/properties/ListenerPort",
        "/properties/RecoStorageSizeInGb",
        "/properties/ScanDnsRecordId",
        "/properties/ScanIpIds",
        "/properties/State",
        "/properties/TimeCreated",
        "/properties/Version",
        "/properties/VipIds"
    ],
    "primaryIdentifier": [
        "/properties/tfcfnid"
    ],
    "handlers": {
        "create": {
            "permissions": [
                "s3:PutObject",
                "secretsmanager:GetSecretValue"
            ]
        },
        "read": {
            "permissions": []
        },
        "update": {
            "permissions": [
                "s3:GetObject",
                "s3:PutObject",
                "secretsmanager:GetSecretValue"
            ]
        },
        "delete": {
            "permissions": [
                "s3:GetObject",
                "s3:DeleteObject",
                "secretsmanager:GetSecretValue"
            ]
        },
        "list": {
            "permissions": []
        }
    }
}